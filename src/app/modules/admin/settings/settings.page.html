<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/users"></ion-back-button>
    </ion-buttons>
    <ion-title>Admin Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Admin Settings</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="settings-container">
    <!-- Profile Section -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Profile</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-avatar slot="start">
            <img src="https://gravatar.com/avatar/placeholder?d=mp" alt="Admin avatar">
          </ion-avatar>
          <ion-label>
            <h2>Admin User</h2>
            <!-- <p>admin@example.com</p> -->
          </ion-label>
          <ion-button slot="end" fill="clear" size="small">
            Edit
          </ion-button>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- System Settings -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>System</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="full">
          <ion-item>
            <ion-label>Maintenance Mode</ion-label>
            <ion-toggle [(ngModel)]="settings.maintenanceMode"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Debug Mode</ion-label>
            <ion-toggle [(ngModel)]="settings.debugMode"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>System Notifications</ion-label>
            <ion-toggle [(ngModel)]="settings.systemNotifications"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Cache Control</ion-label>
            <ion-select [(ngModel)]="settings.cacheControl" interface="popover">
              <ion-select-option value="none">None</ion-select-option>
              <ion-select-option value="light">Light (1 hour)</ion-select-option>
              <ion-select-option value="moderate">Moderate (1 day)</ion-select-option>
              <ion-select-option value="aggressive">Aggressive (1 week)</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- User Management -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>User Management</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="full">
          <ion-item>
            <ion-label>Allow New Registrations</ion-label>
            <ion-toggle [(ngModel)]="settings.allowRegistrations"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Default User Role</ion-label>
            <ion-select [(ngModel)]="settings.defaultUserRole" interface="popover">
              <ion-select-option value="guest">Guest</ion-select-option>
              <ion-select-option value="user">User</ion-select-option>
              <ion-select-option value="editor">Editor</ion-select-option>
              <ion-select-option value="admin">Admin</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label>User Approval</ion-label>
            <ion-select [(ngModel)]="settings.userApproval" interface="popover">
              <ion-select-option value="automatic">Automatic</ion-select-option>
              <ion-select-option value="manual">Manual</ion-select-option>
              <ion-select-option value="email">Email Verification</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Session Timeout (minutes)</ion-label>
            <ion-input type="number" [(ngModel)]="settings.sessionTimeout"></ion-input>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Security Settings -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Security</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="full">
          <ion-item>
            <ion-label>Two-Factor Authentication</ion-label>
            <ion-toggle [(ngModel)]="settings.twoFactorAuth"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Force Strong Passwords</ion-label>
            <ion-toggle [(ngModel)]="settings.strongPasswords"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Password Expiry (days)</ion-label>
            <ion-input type="number" [(ngModel)]="settings.passwordExpiry"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label>IP Restriction</ion-label>
            <ion-toggle [(ngModel)]="settings.ipRestriction"></ion-toggle>
          </ion-item>
          <ion-item *ngIf="settings.ipRestriction">
            <ion-label position="stacked">Allowed IP Addresses</ion-label>
            <ion-textarea [(ngModel)]="settings.allowedIPs" rows="3" placeholder="Enter comma-separated IPs"></ion-textarea>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Notification Settings -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Notifications</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="full">
          <ion-item>
            <ion-label>Email Notifications</ion-label>
            <ion-toggle [(ngModel)]="settings.emailNotifications"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Push Notifications</ion-label>
            <ion-toggle [(ngModel)]="settings.pushNotifications"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>SMS Alerts</ion-label>
            <ion-toggle [(ngModel)]="settings.smsAlerts"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Activity Log</ion-label>
            <ion-toggle [(ngModel)]="settings.activityLog"></ion-toggle>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Appearance Settings -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Appearance</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="full">
          <ion-item>
            <ion-label>Theme</ion-label>
            <ion-select [(ngModel)]="settings.theme" interface="popover">
              <ion-select-option value="light">Light</ion-select-option>
              <ion-select-option value="dark">Dark</ion-select-option>
              <ion-select-option value="system">System Default</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label>Primary Color</ion-label>
            <ion-input type="color" [(ngModel)]="settings.primaryColor"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label>Secondary Color</ion-label>
            <ion-input type="color" [(ngModel)]="settings.secondaryColor"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label>Font Size</ion-label>
            <ion-range min="12" max="20" step="1" snaps="true" [(ngModel)]="settings.fontSize">
              <ion-label slot="start">12px</ion-label>
              <ion-label slot="end">20px</ion-label>
            </ion-range>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Backup & Restore -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Backup & Restore</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="full">
          <ion-item>
            <ion-label>Auto Backup</ion-label>
            <ion-toggle [(ngModel)]="settings.autoBackup"></ion-toggle>
          </ion-item>
          <ion-item *ngIf="settings.autoBackup">
            <ion-label>Backup Frequency</ion-label>
            <ion-select [(ngModel)]="settings.backupFrequency" interface="popover">
              <ion-select-option value="daily">Daily</ion-select-option>
              <ion-select-option value="weekly">Weekly</ion-select-option>
              <ion-select-option value="monthly">Monthly</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label>Backup Storage</ion-label>
            <ion-select [(ngModel)]="settings.backupStorage" interface="popover">
              <ion-select-option value="local">Local</ion-select-option>
              <ion-select-option value="cloud">Cloud</ion-select-option>
              <ion-select-option value="both">Both</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-item lines="none">
            <ion-button expand="block" color="primary" fill="outline">
              Backup Now
            </ion-button>
          </ion-item>
          <ion-item lines="none">
            <ion-button expand="block" color="warning" fill="outline">
              Restore from Backup
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Save Button -->
    <div class="save-button-container">
      <ion-button expand="block" color="success" (click)="saveSettings()">
        Save Settings
      </ion-button>
    </div>
  </div>
</ion-content>